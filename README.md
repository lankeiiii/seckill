## 秒杀系统
### 系统安全性
  - 对用户身份验证，确保只有合法用户才能参与秒杀活动

    *在 Laravel 8 及更高版本中，你可以使用 laravel/ui 包来生成认证相关的代码*
  - 对用户请求验证，防止恶意请求和刷单

    **app/Http/Requests/SeckillRequest.php** *可以在控制其中注入使用请求类来代替直接接收 HTTP 请求。Laravel 会自动解析请求数据，并对其进行验证*
  - 请求限流，防止系统过载
    
    *throttle*中间件；或者自定义全局配置

### 缓存策略

- 缓存商品信息
  
  写命令，后台管理员触发

  定时任务，秒杀前自动执行缓存

  用户访问时

  预热缓存

### 并发控制

- 队列

  消息队列（rabbitmq）用户请求进行缓冲和异步处理
  
  任务队列，XXXjob提供重试及错误处理
- 锁机制

    乐观锁通常基于数据版本（version）的记录机制实现。可以为每个商品或库存记录增加一个版本号。当用户发起秒杀请求时，系统首先读取商品的当前版本号和库存数量。然后，在更新库存时，将此版本号加1，并将新的库存数量和版本号一起提交到数据库。数据库会检查提交的数据版本号是否大于当前记录的版本号，如果是，则更新库存并返回成功，否则认为数据已过期并拒绝更新。这样可以确保在并发访问时，只有一个请求能够成功更新库存，其他请求则会被拒绝，从而保证了数据的一致性。

    分布式锁则用于控制分布式系统之间同步访问共享资源。在秒杀系统中，可以使用分布式锁来确保同一时间只有一个节点或进程能够处理秒杀请求，从而避免了超卖的情况。常见的分布式锁实现方式包括基于Redis的分布式锁、基于Zookeeper的分布式锁等。当节点获取到锁后，可以处理秒杀请求并更新库存，处理完成后释放锁，以便其他节点能够获取锁并处理请求。
